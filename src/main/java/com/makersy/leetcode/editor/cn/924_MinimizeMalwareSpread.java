/**
 * ç»™å‡ºäº†ä¸€ä¸ªç”± n ä¸ªèŠ‚ç‚¹ç»„æˆçš„ç½‘ç»œï¼Œç”¨ n Ã— n ä¸ªé‚»æ¥çŸ©é˜µå›¾ graph è¡¨ç¤ºã€‚åœ¨èŠ‚ç‚¹ç½‘ç»œä¸­ï¼Œå½“ graph[i][j] = 1 æ—¶ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ i èƒ½å¤Ÿç›´æ¥è¿æ¥åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ jã€‚
 * <p>
 * ä¸€äº›èŠ‚ç‚¹ initial æœ€åˆè¢«æ¶æ„è½¯ä»¶æ„ŸæŸ“ã€‚åªè¦ä¸¤ä¸ªèŠ‚ç‚¹ç›´æ¥è¿æ¥ï¼Œä¸”å…¶ä¸­è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹å—åˆ°æ¶æ„è½¯ä»¶çš„æ„ŸæŸ“ï¼Œé‚£ä¹ˆä¸¤ä¸ªèŠ‚ç‚¹éƒ½å°†è¢«æ¶æ„è½¯ä»¶æ„ŸæŸ“ã€‚è¿™ç§æ¶æ„è½¯ä»¶çš„ä¼ æ’­å°† ç»§ç»­ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šçš„èŠ‚ç‚¹å¯ä»¥è¢«è¿™ç§æ–¹å¼æ„ŸæŸ“ã€‚
 * <p>
 * å‡è®¾ M(initial) æ˜¯åœ¨æ¶æ„è½¯ä»¶åœæ­¢ä¼ æ’­ä¹‹åï¼Œæ•´ä¸ªç½‘ç»œä¸­æ„ŸæŸ“æ¶æ„è½¯ä»¶çš„æœ€ç»ˆèŠ‚ç‚¹æ•°ã€‚
 * <p>
 * å¦‚æœä» initial ä¸­ç§»é™¤æŸä¸€èŠ‚ç‚¹èƒ½å¤Ÿæœ€å°åŒ– M(initial)ï¼Œ è¿”å›è¯¥èŠ‚ç‚¹ã€‚å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹æ»¡è¶³æ¡ä»¶ï¼Œå°±è¿”å›ç´¢å¼•æœ€å°çš„èŠ‚ç‚¹ã€‚
 * <p>
 * è¯·æ³¨æ„ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å·²ä»å—æ„ŸæŸ“èŠ‚ç‚¹çš„åˆ—è¡¨ initial ä¸­åˆ é™¤ï¼Œå®ƒä»¥åä»æœ‰å¯èƒ½å› æ¶æ„è½¯ä»¶ä¼ æ’­è€Œå—åˆ°æ„ŸæŸ“ã€‚
 * <p>
 * <p>
 * <p>
 * <p>
 * <p>
 * <p>
 * ç¤ºä¾‹ 1ï¼š
 * <p>
 * <p>
 * è¾“å…¥ï¼šgraph = [[1,1,0],[1,1,0],[0,0,1]], initial = [0,1] è¾“å‡ºï¼š0
 * <p>
 * <p>
 * ç¤ºä¾‹ 2ï¼š
 * <p>
 * <p>
 * è¾“å…¥ï¼šgraph = [[1,0,0],[0,1,0],[0,0,1]], initial = [0,2] è¾“å‡ºï¼š0
 * <p>
 * <p>
 * ç¤ºä¾‹ 3ï¼š
 * <p>
 * <p>
 * è¾“å…¥ï¼šgraph = [[1,1,1],[1,1,1],[1,1,1]], initial = [1,2] è¾“å‡ºï¼š1
 * <p>
 * <p>
 * <p>
 * <p>
 * æç¤ºï¼š
 * <p>
 * <p>
 * <p>
 * n == graph.length n == graph[i].length 2 <= n <= 300 graph[i][j] == 0 æˆ– 1. graph[i][j] == graph[j][i] graph[i][i] ==
 * 1 1 <= initial.length <= n 0 <= initial[i] <= n - 1 initial ä¸­æ‰€æœ‰æ•´æ•°å‡ä¸é‡å¤
 * <p>
 * <p>
 * Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ å¹¶æŸ¥é›† å›¾ å“ˆå¸Œè¡¨ ğŸ‘ 124 ğŸ‘ 0
 */

package com.makersy.leetcode.editor.cn;

import java.util.ArrayDeque;
import java.util.HashMap;
import java.util.Map;
import java.util.Queue;

class MinimizeMalwareSpread {

    public static void main(String[] args) {
        //Solution solution = new MinimizeMalwareSpread().new Solution();
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {

        public int minMalwareSpread(int[][] graph, int[] initial) {
            int n = graph.length;
            int[] ids = new int[n];
            Map<Integer, Integer> idToSize = new HashMap<Integer, Integer>();
            int id = 0;
            for (int i = 0; i < n; ++i) {
                if (ids[i] == 0) {
                    ++id;
                    int size = 1;
                    Queue<Integer> queue = new ArrayDeque<Integer>();
                    queue.offer(i);
                    ids[i] = id;
                    while (!queue.isEmpty()) {
                        int u = queue.poll();
                        for (int v = 0; v < n; ++v) {
                            if (ids[v] == 0 && graph[u][v] == 1) {
                                ++size;
                                queue.offer(v);
                                ids[v] = id;
                            }
                        }
                    }
                    idToSize.put(id, size);
                }
            }
            Map<Integer, Integer> idToInitials = new HashMap<Integer, Integer>();
            for (int u : initial) {
                idToInitials.put(ids[u], idToInitials.getOrDefault(ids[u], 0) + 1);
            }
            int ans = n + 1, ansRemoved = 0;
            for (int u : initial) {
                int removed = (idToInitials.get(ids[u]) == 1 ? idToSize.get(ids[u]) : 0);
                if (removed > ansRemoved || (removed == ansRemoved && u < ans)) {
                    ans = u;
                    ansRemoved = removed;
                }
            }
            return ans;
        }
    }

    //leetcode submit region end(Prohibit modification and deletion)

}